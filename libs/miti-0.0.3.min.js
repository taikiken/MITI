/**
 * MITI
 * hash change helper
 * Dual licensed under The MIT License (MIT) and GPL licenses.
 *
 * Copyright (c) 2013 - 2014 taikiken
 * @author taikiken from http://inazumatv.com
 * hosted on https://github.com/taikiken/MITI
 * @require inazumatv.util / https://github.com/taikiken/inazumatv
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 *
 * modified by taikiken
*/var MITI={};MITI.HASH_CHANGE="mitiHashChange",function(a){"use strict";var b=a.build=a.build||{};b.version="0.0.3",b.buildDate="Fri, 24 Jan 2014 12:31:37 GMT"}(this.MITI),function(a,b,c){"use strict";function d(){if("undefined"==typeof f||null===f)throw"Annai.activate first";if("undefined"!=typeof g)return g;var a,b;return this._boundHashChange=this._onHashChange.bind(this),this._$window=f(c),m=!1,a=c.location.protocol,b=c.location.hostname,this._server=a+"//"+b,this._protocol=a,this._host=b,g=this}var e,f,g,h,i=b.EventObject,j=b.EventDispatcher,k="#!/",l=[],m=!1;d.getInstance=function(){return"undefined"==typeof g&&(g=new d),g},d.activate=function(a){f=a,b.jq.ExternalJQ.install("HashChange",a),e=b.eventStop};var n=d.prototype;n.addEventListener=function(){},n.removeEventListener=function(){},n.removeAllEventListeners=function(){},n.hasEventListener=function(){},n.dispatchEvent=function(){},j.initialize(n),n._onHashChange=function(b){e(b);var c=this._hash(),d=this._clean(),f=this._parameter(),g=this._validate(d);(this._always||g)&&this.dispatchEvent(new i(a.HASH_CHANGE,{hash:c,query:f,key:d,correct:g}),this)},n.setUp=function(a,b,c){m||(this.setRoot(a),this.setTrust(b),this._always=!!c,this._$window.on("hashchange",this._boundHashChange),m=!0)},n.fire=function(){this._$window.trigger("hashchange")},n.getHashString=function(){return k},n.setHashString=function(a){k=a},n.getProtocol=function(){return this._protocol},n.getHost=function(){return this._host},n.getServer=function(){return this._server},n.setRoot=function(a){h=a},n.getRoot=function(){return h},n.setTrust=function(a){l=a.slice(0)},n.getTrust=function(){return l},n.getHash=function(){return this._clean()},n.isCorrect=function(){return this._validate(this._hash())},n._validate=function(a){return-1!==l.indexOf(a)},n._hash=function(){var a=c.location.hash;return-1===a.indexOf(k)?a:c.location.hash.split(k).pop()},n._parameter=function(){var a=c.location.href;return-1===a.indexOf("?")?"":"?"+a.split("?").pop()},n._strip=function(a){return-1===a.indexOf("?")?a:a.split("?").shift()},n._clean=function(){return this._strip(this._hash())},b.jq.Annai=d}(MITI,window.inazumatv,window),function(a){"use strict";function b(){throw"HashChange cannot be instantiated"}var c=window.document,d=a.Browser;b.activate=function(a){function b(a){return a=a||location.href,"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var e,f=a,g="hashchange",h=c,i=f.event.special,j=h.documentMode,k="on"+g in window&&(void 0===j||j>7);f.fn[g]=function(a){return a?this.bind(g,a):this.trigger(g)},f.fn[g].delay=50,i[g]=f.extend(i[g],{setup:function(){return k?!1:(f(e.start),void 0)},teardown:function(){return k?!1:(f(e.stop),void 0)}}),e=function(){function a(){var d=b(),e=m(i);"#"===d&&(d=""),"#"===e&&(e=""),d&&d!==i?(l(i=d,e),f(window).trigger(g)):e!==i&&(location.href=location.href.replace(/#.*/,"")+e),c=setTimeout(a,f.fn[g].delay)}var c,e={},i=b(),j=function(a){return a},l=j,m=j;return e.start=function(){c||a()},e.stop=function(){c&&clearTimeout(c),c=void 0},d.IE.legacy()&&!k&&function(){var c,d;e.start=function(){c||(d=f.fn[g].src,d=d&&d+b(),c=f('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){d||l(b()),a()}).attr("src",d||"javascript:0").insertAfter("body")[0].contentWindow,h.onpropertychange=function(){try{"title"===event.propertyName&&(c.document.title=h.title)}catch(a){}})},e.stop=j,m=function(){return b(c.location.href)},l=function(a,b){"#"===a&&"undefined"==typeof b&&(a="");var d=c.document,e=f.fn[g].domain;a!==b&&(d.title=h.title,d.open(),e&&d.write('<script>document.domain="'+e+'"</script>'),d.close(),c.location.hash=a)}}(),e}()},a.jq.HashChange=b}(this.inazumatv);